{% load static %}

<footer>
    <div class="footer-content">
        <div class="footer-section">
            <h3>Oser.AI</h3>
            <p>
                We provide software solutions to optimize charging stations with real-time energy,
                traffic management, maintenance, and seamless EV connectivity.<br>
            </p>
            <div class="social-link">
                <a href="#" target="_blank">
                    <img src="{% static '/assets/images/icons/location.png' %}" alt="location" class="social-icon">
                </a>
                <span class="address-text">Bangalore, Karnataka, India</span>
            </div>
        </div>
        <div class="footer-section">
            <h3>Quick Links</h3>
            <ul>
                <li><a href="#landing-page">Home</a></li>
                <li><a href="#mission">Mission</a></li>
                <li><a href="#services-section">Services</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#contact-container">Contact</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h3>Follow Us</h3>
            <div class="social-links">
                <a href="#" target="_blank"><img src="{% static '/assets/images/icons/linkedin-footer.png' %}" alt="linkedin" class="social-icon"></a>
                <a href="#" target="_blank"><img src="{% static '/assets/images/icons/email-footer.png' %}" alt="Gmail" class="social-icon"></a>
                <a href="#" target="_blank"><img src="{% static '/assets/images/icons/instagram-footer.png' %}" alt="Instagram" class="social-icon"></a>
                <a href="#" target="_blank"><img src="{% static '/assets/images/icons/youtube-footer.png' %}" alt="Youtube" class="social-icon"></a>
            </div>
            <!-- Email Subscription Form -->
            <div class="email-subscription">

                <form action="{% url 'subscribe' %}" method="POST" id = "subscribe">
                    {% csrf_token %}
                    <input type="email" name="email" id="email" placeholder="youremail@domain.com" required>
                    <button type="submit" id="subscribe-button" class="subscribe-btn">Subscribe to newsletter</button>
                </form>

                {% if message %}
                <div class="message">{{ message }}</div>  <!-- Display the message -->
                {% endif %}

            </div>
        </div>
    </div>
    <div class="footer-bottom">
        <p>&copy; 2024 Oser.ai. All rights reserved.</p>
    </div>
</footer>


<script>
    document.getElementById('subscribe-form').addEventListener('submit', async (e) => {
        e.preventDefault(); // Prevent default form submission

        const email = document.getElementById('email').value;
        const csrfToken = "{{ csrf_token }}"; // Get the CSRF token

        try {
            const response = await fetch("{% url 'subscribe' %}", {
                method: "POST",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded",
                    "X-CSRFToken": csrfToken,
                },
                body: new URLSearchParams({ email }),
            });

            const data = await response.json(); // Parse JSON response
            const messageDiv = document.getElementById('message');
            messageDiv.innerText = data.message;

            // Optional: Add classes based on success or error for styling
            if (data.success) {
                messageDiv.className = 'message success';
            } else {
                messageDiv.className = 'message error';
            }
        } catch (error) {
            const messageDiv = document.getElementById('message');
            messageDiv.innerText = "An error occurred. Please try again.";
            messageDiv.className = 'message error';
            console.error(error);
        }
    });
</script>





<!--
<script>
    document.getElementById('subscribe-form').addEventListener('submit', async (e) => {
        e.preventDefault(); // Prevent the default form submission
        const email = document.getElementById('email').value;
        const csrfToken = "{{ csrf_token }}"; // Get the CSRF token

        try {
            const response = await fetch("{% url 'subscribe' %}", {
                method: "POST",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded",
                    "X-CSRFToken": csrfToken,
                },
                body: new URLSearchParams({ email }),
            });

            const message = await response.text(); // Get the response message
            document.getElementById('message').innerText = message;
        } catch (error) {
            document.getElementById('message').innerText = "An error occurred. Please try again.";
            console.error(error);
        }
    });
</script>  -->

<!--<script type="text/javascript">



$(document).on('submit', '#subscribe', function (e) {
    e.preventDefault(); // Prevent form submission/reload
    
    const email = $('#email').val();
    const csrfToken = $('input[name=csrfmiddlewaretoken]').val();

    if (!email) {
        // If email is empty, show an error message
        $("#message").html("<span style='color: red;'>Please enter a valid email address.</span>");
        return;
    }

    // Perform AJAX POST request
    $.ajax({
        type: 'POST',
        url: '/subscribe',
        data: {
            email: email,
            csrfmiddlewaretoken: csrfToken
        },
        success: function (response) {
            // Show the response message from the server
            $("#message").html(`<span style='color: green;'>${response}</span>`);
        },
        error: function (xhr, status, error) {
            // Handle errors
            $("#message").html("<span style='color: red;'>An error occurred. Please try again later.</span>");
        }
    });
});

</script> -->